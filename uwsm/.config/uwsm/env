# Application-specific redirects
export CARGO_HOME="${XDG_DATA_HOME:-$HOME/.local/share}/cargo"
export GNUPGHOME="${XDG_DATA_HOME:-$HOME/.local/share}/gnupg"
export PYTHONHISTORY="${XDG_STATE_HOME:-$HOME/.local/state}/python/history"

# Toolkit & Theming
export QT_QPA_PLATFORMTHEME="qt6ct"
export QT_QPA_PLATFORM="wayland;xcb"
export ADW_DISABLE_PORTAL=1

# Services
export SSH_AUTH_SOCK="$XDG_RUNTIME_DIR/ssh-agent.socket"

# Hardware Specifics
if [ -d "/sys/module/nvidia" ]; then
    # --- CORE NVIDIA / WAYLAND STABILITY ---
    export LIBVA_DRIVER_NAME=nvidia
    export __GLX_VENDOR_LIBRARY_NAME=nvidia
    export NVD_BACKEND=direct
    export ELECTRON_OZONE_PLATFORM_HINT=auto

    # --- GAMING RELATED ---
    export __GL_MaxFramesAllowed=1   # Prevents the GPU from queuing frames (Good for cpu bottleneck)

    # Enables the capability for G-Sync/VRR
    export __GL_GSYNC_ALLOWED=1
    export __GL_VRR_ALLOWED=1

    # --- ENABLE ONLY WHEN GPU IS THE BOTTLENECK ---
    #export __GL_THREADED_OPTIMIZATIONS=1
fi
