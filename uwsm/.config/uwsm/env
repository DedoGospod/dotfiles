#!/usr/bin/env bash

# Application-specific redirects
export CARGO_HOME="${XDG_DATA_HOME:-$HOME/.local/share}/cargo"
export GNUPGHOME="${XDG_DATA_HOME:-$HOME/.local/share}/gnupg"
export PYTHONHISTORY="${XDG_STATE_HOME:-$HOME/.local/state}/python/history"
export GOPATH="${XDG_DATA_HOME:-$HOME/.local/share}/go"

# Toolkit & Theming
export QT_QPA_PLATFORMTHEME="qt6ct"
export QT_QPA_PLATFORM="wayland;xcb"
export ADW_DISABLE_PORTAL=1

# Hardware Specifics
if [[ -d "/sys/module/nvidia" ]]; then
    export LIBVA_DRIVER_NAME=nvidia            # Hardware Video Acceleration
    export __GLX_VENDOR_LIBRARY_NAME=nvidia    # OpenGL Routing
    export GBM_BACKEND=nvidia-drm              # The Wayland Handshake
    
    # Explicitly enable G-Sync and VRR
    export __GL_GSYNC_ALLOWED=1
    export __GL_VRR_ALLOWED=1
fi
